<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Details</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap">

    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top, #1a1a2e, #0c0c14);
            color: white;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 400px;
            padding: 28px;
            border-radius: 28px;
            background: rgba(25, 25, 40, 0.85);
            box-shadow: 0 0 25px rgba(120, 60, 255, 0.4);
            backdrop-filter: blur(12px);
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .title {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 8px;
        }

        #myTitle {
            font-size: 22px;
            font-weight: 600;
            color: #7fff00;
            text-align: center;
            margin-bottom: 5px;
        }

        .price {
            font-size: 30px;
            color: #90ff72;
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            text-shadow: 0 0 8px #73ff49;
        }

        .section-title {
            margin-top: 22px;
            margin-bottom: 6px;
            font-size: 18px;
            font-weight: 500;
            color: #cfcffe;
        }

        .calendar-box {
            background: #161622;
            padding: 22px;
            border-radius: 18px;
            box-shadow: inset 0 0 12px rgba(100, 60, 255, 0.25);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
        }

        .calendar-header h3 {
            margin: 0;
            color: #e1e1ff;
            font-size: 20px;
        }

        .cal-arrows span {
            font-size: 22px;
            padding: 5px 10px;
            cursor: pointer;
            transition: 0.2s;
            border-radius: 6px;
        }

        .cal-arrows span:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-size: 13px;
            opacity: 0.5;
            margin-bottom: 8px;
        }

        .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            gap: 4px;
        }

        .days span {
            padding: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.25s ease;
            background: rgba(255, 255, 255, 0.03);
            font-size: 14px;
        }

        .days span:hover {
            background: rgba(140, 80, 255, 0.5);
            transform: scale(1.05);
            color: #fff;
        }

        .days span.active {
            background: #7a42ff;
            box-shadow: 0 0 8px #9a6bff;
            color: #fff;
            font-weight: 600;
        }

        .promo-box {
            margin-top: 12px;
            background: rgba(30, 30, 45, 0.9);
            padding: 14px 16px;
            border-radius: 14px;
            display: flex;
            color: #fff;
            align-items: center;
            box-shadow: inset 0 0 10px rgba(100, 60, 255, 0.2);
            transition: 0.2s;
        }

        .promo-box input,
        .promo-box select {
            width: 100%;
            color: white;
            background: transparent;
            border: none;
            outline: none;
            font-size: 16px;
        }

        .footer-btn {
            width: 100%;
            margin-top: 24px;
            padding: 15px;
            border: none;
            background: linear-gradient(135deg, #a56bff, #7840ff);
            color: white;
            font-size: 19px;
            font-weight: 600;
            border-radius: 40px;
            cursor: pointer;
            transition: 0.25s ease;
            box-shadow: 0 0 12px rgba(140, 80, 255, 0.4);
        }

        .footer-btn:hover {
            background: linear-gradient(135deg, #8e4aff, #6a2cff);
            transform: scale(1.03);
            box-shadow: 0 0 18px rgba(150, 90, 255, 0.6);
        }
    </style>

</head>

<body>

    <div class="container">
        <form id="contactForm">

            <h2 class="title">Booking Details</h2>

            <h2 id="myTitle">House Cleaning</h2>
            <p class="price" id="Vel">₹400 <small>(Floor price)</small></p>

            <h4 class="section-title">Select Date</h4>

            <div class="calendar-box">
                <div class="calendar-header">
                    <h3 id="calendarMonth">January 2026</h3>

                    <div class="cal-arrows">
                        <span id="prevMonth">&#8249;</span>
                        <span id="nextMonth">&#8250;</span>
                    </div>
                </div>

                <div class="weekdays">
                    <span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span><span>Su</span>
                </div>

                <div class="days" id="calendarDays"></div>
            </div>

            <h4 class="section-title">Select Time</h4>

            <select id="timeSelect" class="promo-box" required>
                <option value="">Choose Time</option>
                <option value="FullDay">Full Day (8AM–6PM)</option>
                <option value="08:00">8:00 AM – 10:00 AM</option>
                <option value="10:00">11:00 AM – 1:00 PM</option>
                <option value="12:00">2:00 PM – 4:00 PM</option>
                <option value="14:00">5:00 PM – 8:00 PM</option>
            </select>

            <h4 class="section-title">Contact</h4>

            <div class="promo-box"><input type="text" placeholder="Enter Name" id="name" required></div>
            <div class="promo-box"><input type="number" placeholder="Enter Phone Number" id="number" required></div>
            <!-- <div class="promo-box"><input type="meassing" placeholder="Enter Address" id="address" required></div> -->
            <div class="promo-box" style="height:auto;">
                <textarea id="address" placeholder="Enter Address" required
                    style="width:100%; background:transparent; border:none; outline:none; color:white; font-size:16px; resize:none;"></textarea>
            </div>

            <!-- FIXED BUTTON -->
            <button class="footer-btn" id="continueBtn" type="submit">Continue – ₹400</button>


        </form>
    </div>

    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCqFIyVhPXx1r5W4fJM4nOii09AIxi0vKQ",
            authDomain: "contactform-85948.firebaseapp.com",
            databaseURL: "https://contactform-85948-default-rtdb.firebaseio.com",
            projectId: "contactform-85948",
            storageBucket: "contactform-85948.appspot.com",
            messagingSenderId: "901007557564",
            appId: "1:901007557564:web:25b92b3224f24d85be21b9"
        };

        firebase.initializeApp(firebaseConfig);
        var contactFormDB = firebase.database().ref("booking");
    </script>

    <!-- CALENDAR -->
    <script>
        let currentYear = 2026;
        let currentMonth = 0;
        let selectedFullDate = "";

        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        function renderCalendar() {
            const daysContainer = document.getElementById("calendarDays");
            const monthLabel = document.getElementById("calendarMonth");

            monthLabel.innerText = `${monthNames[currentMonth]} ${currentYear}`;
            daysContainer.innerHTML = "";

            let firstDay = new Date(currentYear, currentMonth, 1).getDay();
            if (firstDay === 0) firstDay = 7;

            const totalDays = new Date(currentYear, currentMonth + 1, 0).getDate();

            for (let i = 1; i < firstDay; i++) {
                const empty = document.createElement("span");
                daysContainer.appendChild(empty);
            }

            for (let d = 1; d <= totalDays; d++) {
                const day = document.createElement("span");
                day.innerText = d;

                day.addEventListener("click", () => {
                    document.querySelectorAll("#calendarDays span").forEach(s => s.classList.remove("active"));
                    day.classList.add("active");
                    selectedFullDate = `${d}-${monthNames[currentMonth]}-${currentYear}`;
                });

                daysContainer.appendChild(day);
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            renderCalendar();

            document.getElementById("prevMonth").addEventListener("click", () => {
                currentMonth = currentMonth > 0 ? currentMonth - 1 : 11;
                if (currentMonth === 11) currentYear--;
                renderCalendar();
            });

            document.getElementById("nextMonth").addEventListener("click", () => {
                currentMonth = currentMonth < 11 ? currentMonth + 1 : 0;
                if (currentMonth === 0) currentYear++;
                renderCalendar();
            });
        });
    </script>

    <!-- PRICE LOGIC -->
    <script>
        document.getElementById("timeSelect").addEventListener("change", function () {
            let t = this.value;
            let newPrice = 400;

            if (t === "FullDay") newPrice = 600;
            else if (t !== "") newPrice = 420;

            document.getElementById("Vel").innerHTML = "₹" + newPrice;
        });
    </script>

    <!-- SAVE FORM -->
    <script>
        document.getElementById("contactForm").addEventListener("submit", submitForm);

        function submitForm(e) {
            e.preventDefault();

            if (!selectedFullDate) return alert("Please select a date");

            let name = getVal("name");
            let number = getVal("number");
            let address = getVal("address");
            let serviceName = document.getElementById("myTitle").innerText;
            let price = document.getElementById("Vel").innerText.replace("₹", "");
            let time = document.getElementById("timeSelect").value;
            let monthYear = document.getElementById("calendarMonth").innerText;

            saveMessages(name, number, address, selectedFullDate, serviceName, monthYear, price, time);

            window.location.href = "sumite.html";
        }

        function saveMessages(name, number, address, date, title, month, price, time) {
            let newBooking = contactFormDB.push();

            newBooking.set({
                name,
                number,
                address,
                selectedDate: date,
                selectedTime: time,
                title,
                monthDisplayed: month,
                price
            });
        }

        function getVal(id) {
            return document.getElementById(id).value;
        }
    </script>
    <script>
        document.getElementById("timeSelect").addEventListener("change", function () {
            let t = this.value;
            let newPrice = 400;

            if (t === "FullDay") newPrice = 600;
            else if (t !== "") newPrice = 420;

            document.getElementById("Vel").innerHTML = "₹" + newPrice;
        });
        document.getElementById("timeSelect").addEventListener("change", function () {
            let t = this.value;
            let newPrice = 400;

            if (t === "FullDay") newPrice = 600;
            else if (t !== "") newPrice = 420;

            document.getElementById("Vel").innerHTML = "₹" + newPrice;

            // Update button text also
            document.getElementById("continueBtn").innerText = "Continue – ₹" + newPrice;
        });

    </script>

</body>

</html>